From 40c9614f9d1ae9e70abd677b4f754744474bdb92 Mon Sep 17 00:00:00 2001
From: Weiwei Li <liweiwei@iscas.ac.cn>
Date: Thu, 31 Aug 2023 20:06:51 +0800
Subject: [PATCH] Fix int overflow

---
 encoder/encoder.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/encoder/encoder.cpp b/encoder/encoder.cpp
index 05fe3dd..7a0095a 100644
--- a/encoder/encoder.cpp
+++ b/encoder/encoder.cpp
@@ -29,7 +29,7 @@ Encoder *h264_codec_select(VideoOptions *options, const StreamInfo &info)
 	int fd = open(hw_codec, O_RDWR, 0);
 	if (fd)
 	{
-		int ret = ioctl(fd, VIDIOC_QUERYCAP, &caps);
+		int ret = ioctl(fd, (int)VIDIOC_QUERYCAP, &caps);
 		if (!ret && !strncmp((char *)caps.card, "bcm2835-codec-encode", sizeof(caps.card)))
 			return new H264Encoder(options, info);
 	}
-- 
2.25.1

